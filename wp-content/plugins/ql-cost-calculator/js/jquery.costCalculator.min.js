!function($){"use strict";var defaults={formula:{},currency:"$",currencyPosition:"before",thousandthSeparator:",",decimalSeparator:".",updateHidden:""},methods={init:function(r){return this.each(function(){r=$.extend(!1,defaults,r),$(this).data("cost-calculator-options",r),$(this).costCalculator("calculate")})},calculate:function(options){return this.each(function(){options=$(this).data("cost-calculator-options");var tempFormula=options.formula,array=$.grep(tempFormula.split(/\(|\)|\+|{\+}|\*|{\*}|\/|{\/}|\^|{\^}|{-}/g),function(r){return""!=r});if(options.formula.indexOf("power")>=0){var powerstart=0,powerend=0;for(var i in array)"{powerstart}"!=array[i]&&"{powerend}"!=array[i]&&(powerstart=0,powerend=0,array[i].indexOf("{powerstart}")>=0&&(powerstart=1),array[i].indexOf("{powerend}")>=0&&(powerend=1),tempFormula=tempFormula.replace(array[i],(powerstart?"Math.pow(":"")+(isNaN(parseFloat($("#"+array[i].replace(/{powerstart}|{powerend}/g,"")).val()))?isNaN(parseFloat(array[i].replace(/{powerstart}|{powerend}/g,"")))?0:parseFloat(array[i].replace(/{powerstart}|{powerend}/g,"")):parseFloat($("#"+array[i].replace(/{powerstart}|{powerend}/g,"")).val()))+(powerend?")":"")));tempFormula=tempFormula.replace("{powerstart}","Math.pow("),tempFormula=tempFormula.replace("{powerend}",")"),tempFormula=tempFormula.replace(/\^/g,",")}else for(var i in array)tempFormula=tempFormula.replace(array[i],isNaN(parseFloat($("#"+array[i]).val()))?isNaN(parseFloat(array[i]))?0:parseFloat(array[i]):parseFloat($("#"+array[i]).val()));tempFormula=tempFormula.replace(/{|}/g,"");var sum=eval(tempFormula),regex=new RegExp("\\d(?=(\\d{3})+\\"+options.decimalSeparator+")","g");$(this).html(("before"==options.currencyPosition?'<span class="cost-calculator-currency">'+options.currency+"</span>":"")+sum.toFixed(2).replace(".",options.decimalSeparator).replace(regex,"$&"+options.thousandthSeparator)+("after"==options.currencyPosition?'<span class="cost-calculator-currency">'+options.currency+"</span>":"")),"object"==jQuery.type(options.updateHidden)&&(options.updateHidden.val(options.currency+sum.toFixed(2).replace(".",options.decimalSeparator).replace(regex,"$&"+options.thousandthSeparator)),$("#"+options.updateHidden.attr("id")+"-value").val(sum.toFixed(2)))})}};jQuery.fn.costCalculator=function(r){return methods[r]?methods[r].apply(this,arguments):"object"!=typeof r&&r?void 0:methods.init.apply(this,arguments)}}(jQuery);